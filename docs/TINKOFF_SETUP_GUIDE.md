# üîë –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –¢–∏–Ω—å–∫–æ—Ñ—Ñ API

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ –¢–∏–Ω—å–∫–æ—Ñ—Ñ API –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞.

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

1. **–ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏** –æ—Ç –¢–∏–Ω—å–∫–æ—Ñ—Ñ
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –≤ Vercel
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏**
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üîë –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π –æ—Ç –¢–∏–Ω—å–∫–æ—Ñ—Ñ

### 1.1 –í—Ö–æ–¥ –≤ –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ë–∏–∑–Ω–µ—Å
1. **–û—Ç–∫—Ä–æ–π—Ç–µ** https://business.tinkoff.ru
2. **–í–æ–π–¥–∏—Ç–µ** –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ò–ü

### 1.2 –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –≤ —Ä–∞–∑–¥–µ–ª "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏" ‚Üí "API"
2. **–ù–∞–∂–º–∏—Ç–µ** "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç"
3. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:**
   - **–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:** Personal Productivity AI
   - **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é —Å –ò–ò
   - **URL —Å–∞–π—Ç–∞:** https://personal-productivity-ai.vercel.app
   - **Webhook URL:** https://personal-productivity-ai.vercel.app/api/tinkoff/webhook

### 1.3 –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- **Terminal Key** (Terminal ID) - –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
- **Secret Key** (–ü–∞—Ä–æ–ª—å) - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ –∫–ª—é—á–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ!

## ‚öôÔ∏è –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

### 2.1 –û—Ç–∫—Ä—ã—Ç–∏–µ Vercel Dashboard
1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –≤ https://vercel.com/dashboard
2. **–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç** `personal-productivity-ai`
3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –≤ Settings ‚Üí Environment Variables

### 2.2 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è **Production**:

```env
# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª—é—á–∏ –¢–∏–Ω—å–∫–æ—Ñ—Ñ
TINKOFF_TERMINAL_KEY=–≤–∞—à_terminal_key_–∑–¥–µ—Å—å
TINKOFF_SECRET_KEY=–≤–∞—à_secret_key_–∑–¥–µ—Å—å

# Webhook URL
TINKOFF_WEBHOOK_URL=https://personal-productivity-ai.vercel.app/api/tinkoff/webhook

# –î–∞–Ω–Ω—ã–µ –ò–ü –¥–ª—è —á–µ–∫–æ–≤
TINKOFF_RECIPIENT_FULL_NAME=–í–∞—à–µ –§–ò–û –ò–ü
TINKOFF_ACCOUNT_NUMBER=–Ω–æ–º–µ—Ä_—Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ_—Å—á–µ—Ç–∞
TINKOFF_BANK_NAME=–ê–û ¬´–¢–ë–∞–Ω–∫¬ª
TINKOFF_BIK=044525225
TINKOFF_INN=–≤–∞—à_–∏–Ω–Ω_–∏–ø
TINKOFF_CORR_ACCOUNT=30101810145250000225

# URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
NEXT_PUBLIC_APP_URL=https://personal-productivity-ai.vercel.app
```

### 2.3 –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è
–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –≤ Deployments
2. **–ù–∞–∂–º–∏—Ç–µ** "Redeploy" –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –¥–µ–ø–ª–æ–µ
3. **–î–æ–∂–¥–∏—Ç–µ—Å—å** –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è (2-3 –º–∏–Ω—É—Ç—ã)

## üß™ –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π

### 3.1 –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
–¢–∏–Ω—å–∫–æ—Ñ—Ñ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã:

**–£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞:**
- **–ù–æ–º–µ—Ä:** 4300 0000 0000 0777
- **–°—Ä–æ–∫:** 12/30
- **CVV:** 111

**–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞:**
- **–ù–æ–º–µ—Ä:** 4300 0000 0000 0778
- **–°—Ä–æ–∫:** 12/30
- **CVV:** 111

### 3.2 –ü—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
1. **–û—Ç–∫—Ä–æ–π—Ç–µ** https://personal-productivity-ai.vercel.app/planner?plan=premium
2. **–ù–∞–∂–º–∏—Ç–µ** "–¢–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂"
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É 4300 0000 0000 0777
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** —á—Ç–æ –ø–ª–∞—Ç–µ–∂ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

## üîó –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook

### 4.1 –°–æ–∑–¥–∞–Ω–∏–µ webhook endpoint
Webhook —É–∂–µ —Å–æ–∑–¥–∞–Ω –≤ `src/app/api/tinkoff/webhook/route.ts`

### 4.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –¢–∏–Ω—å–∫–æ—Ñ—Ñ
1. **–í–µ—Ä–Ω–∏—Ç–µ—Å—å** –≤ –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ë–∏–∑–Ω–µ—Å ‚Üí API
2. **–í—ã–±–µ—Ä–∏—Ç–µ** –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ** Webhook URL: `https://personal-productivity-ai.vercel.app/api/tinkoff/webhook`
4. **–í–∫–ª—é—á–∏—Ç–µ** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –ø–ª–∞—Ç–µ–∂–µ–π

## üìä –®–∞–≥ 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### 5.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
curl https://personal-productivity-ai.vercel.app/api/debug-env
```

### 5.2 –õ–æ–≥–∏ Vercel
1. **–û—Ç–∫—Ä–æ–π—Ç–µ** Vercel Dashboard ‚Üí Functions
2. **–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ** –ª–æ–≥–∏ API endpoints
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** –æ—à–∏–±–∫–∏ –≤ `/api/tinkoff/test-payment`

### 5.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂
curl -X POST https://personal-productivity-ai.vercel.app/api/tinkoff/test-payment \
  -H "Content-Type: application/json" \
  -d '{"amount":999,"description":"–¢–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ Premium","planId":"premium"}'
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "Tinkoff API keys not configured"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `TINKOFF_TERMINAL_KEY` –∏ `TINKOFF_SECRET_KEY` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Vercel

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid signature"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `TINKOFF_SECRET_KEY`

### –ü—Ä–æ–±–ª–µ–º–∞: "Terminal not found"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `TINKOFF_TERMINAL_KEY`

### –ü—Ä–æ–±–ª–µ–º–∞: Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `TINKOFF_WEBHOOK_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –¢–∏–Ω—å–∫–æ—Ñ—Ñ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ URL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Functions

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –≤—Å–µ —Ç–∏–ø—ã –ø–ª–∞—Ç–µ–∂–µ–π
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ** –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ** —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫
4. **–î–æ–±–∞–≤—å—Ç–µ** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ —Å—Ç–∞—Ç—É—Å–µ –ø–ª–∞—Ç–µ–∂–µ–π

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ API –∫–ª—é—á–∏ –≤ Git
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–†–µ–≥—É–ª—è—Ä–Ω–æ** –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ** –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** –ª–æ–≥–∏ Vercel
2. **–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å** –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –¢–∏–Ω—å–∫–æ—Ñ—Ñ
3. **–°–æ–∑–¥–∞–π—Ç–µ** issue –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 17.09.2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
