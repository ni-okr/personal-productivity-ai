# @economy_mode — минимизация затрат на модели

## Цели
- По умолчанию использовать только дешёвые/включённые модели
- Короткие ответы и жёсткие лимиты токенов
- Никаких дорогих эскалаций без явного подтверждения пользователя

## Жёсткие правила для ассистентов
- Model defaults:
  - Chat/Tools: gpt-4o-mini или claude-4-sonnet (если включена в плане). 4o/5/sonnet-high — запрещены без явного разрешения.
  - Inline completion: grok-code-fast-1 (если доступен и включён) или gpt-4o-mini.
- Max tokens per response: 350 (жёстко). Для суммаризации можно 700, только если пользователь написал: APPROVE: LONG.
- Всегда сжимай контекст: не включай лишние файлы; избегай всего репозитория; цитируй ровно нужные фрагменты.
- Запрещено: web_search / внешние запросы без явного: APPROVE: WEB. 
- Никаких фоновых/долгих агентов без явного: APPROVE: AGENT. Step limit ≤ 10.
- Никогда не эскалируй на gpt-5-*, claude-sonnet-3.5, gpt-4o (full) без явного: APPROVE: EXPENSIVE.
- Формат ответов: кратко, списки, JSON по необходимости, без «болтовни».

## Практики промптинга
- Требуй у пользователя формат вывода заранее (JSON/таблица/список) и лимит длины.
- При больших задачах: сначала план (краткий), затем выполнение только утверждённых шагов.

## Маршрутизация
- Простые задачи (вывод кода, правки, поиск по проекту) — mini/inline.
- Сложные рассуждения — claude-4-sonnet (если включено в плане). Эскалация только по APPROVE: EXPENSIVE.

## Контроль затрат
- Останавливайся, если ответ >350 токенов; предлагай «Продолжить?»
- Сообщай модель и приблизительный объём токенов в конце сообщения: (model=..., est_tokens=...)
