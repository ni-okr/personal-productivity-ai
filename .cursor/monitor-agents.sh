#!/bin/bash

# üîç –°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ Cursor
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

echo "ü§ñ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–æ–Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ Cursor"
echo "=================================="

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
if [ -f ".env.local" ]; then
    source .env.local
    echo "‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ .env.local"
else
    echo "‚ùå –§–∞–π–ª .env.local –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

echo ""
echo "üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:"
echo "  - Cursor API Key: ${CURSOR_API_KEY:0:20}..."
echo "  - –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $(pwd)"
echo "  - –í—Ä–µ–º—è: $(date)"

echo ""
echo "üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤:"
if npm test --silent > /dev/null 2>&1; then
    echo "  ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ"
else
    echo "  ‚ùå –ï—Å—Ç—å –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö"
    echo "  üîß –ê–≥–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
fi

echo ""
echo "üèóÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏:"
if npm run build --silent > /dev/null 2>&1; then
    echo "  ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ"
else
    echo "  ‚ùå –ï—Å—Ç—å –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏"
    echo "  üîß –ê–≥–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
fi

echo ""
echo "üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–º–∏—Ç–æ–≤ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10):"
git log --oneline -10 --grep="fix:" --grep="feat:" --grep="test:" | head -5

echo ""
echo "üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:"
echo "  - –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ —Ñ–∞–π–ª–∞—Ö —Ç–µ—Å—Ç–æ–≤"
echo "  - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–º–∏—Ç—ã"
echo "  - –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ GitHub Actions"

echo ""
echo "üí° –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:"
echo "  - ./cursor/monitor-agents.sh  # –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç"
echo "  - git log --oneline -10       # –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã"
echo "  - npm test                    # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤"
echo "  - npm run build               # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏"

echo ""
echo "üéØ –§–æ–Ω–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!"
echo "   –û–Ω–∏ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç –æ—à–∏–±–∫–∏ —Ç–µ—Å—Ç–æ–≤ –∏ TypeScript –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ."
